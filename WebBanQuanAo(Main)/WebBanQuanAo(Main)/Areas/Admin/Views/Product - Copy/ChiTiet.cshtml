@model WebBanQuanAo_Main_.Models.Product

@{
    ViewBag.Title = "ChiTiet";
    Layout = "~/Areas/Admin/Views/Shared/_MasterLayout.cshtml";
    var details = ViewBag.Details as List<WebBanQuanAo_Main_.Models.ProDetail>;
    var sizes = ViewBag.Sizes as List<WebBanQuanAo_Main_.Models.Size>;
    var colors = ViewBag.Colors as List<WebBanQuanAo_Main_.Models.Color>;

    // Lấy giá đầu tiên trong ProDetail
    var price = details.FirstOrDefault()?.Price ?? 0;
}
<link href="~/Content/Admin/Detail.css" rel="stylesheet" />
@using (Html.BeginForm("AddToCart", "Cart", FormMethod.Post))
{
    @Html.Hidden("ProductID", Model.ProductID)

    <!-- Hidden lưu color & size được chọn -->
    <input type="hidden" id="ColorSelected" name="color" />
    <input type="hidden" id="SizeSelected" name="size" />




    <div class="container" style="margin-top:30px;">
        <div class="row">

            @*ẢNH SẢN PHẨM*@
            <div class="col-md-7 col-sm-7">
                <img src="@Url.Content(Model.ImagePro)" class="product-image" />
            </div>

            @*THÔNG TIN SẢN PHẨM*@
        <div class="col-md-5 col-sm-5">

            <h3 style="font-weight:600;">@Model.NamePro</h3>
            <h4 style="font-weight:700;">@String.Format("{0:N0}₫", price)</h4>

            @*MÀU*@
            

                <div class="section-title">MÀU: @colors.FirstOrDefault().ColorName</div>

                <div>
                    @foreach (var c in colors)
                    {
                        <div class="color-box ">
                            <img src="@Url.Content(Model.ImagePro)" style="width:100%; height:100%; object-fit:cover;"data-color="@c.ColorName" />
                        </div>
                    }
                </div>

                <div class="clearfix"></div>

                @*SIZE*@
                <div class="section-title">CHỌN KÍCH CỠ</div>

                <div>
                    @foreach (var s in sizes)
                    {
                        <div class="size-box">@s.SizeName</div>
                    }
                </div>

                <div class="clearfix"></div>

                <a style="display:block; margin:15px 0; text-decoration:underline;">
                    Hướng dẫn chọn kích cỡ
                </a>


                <button type="submit" class="btn-cart">THÊM VÀO GIỎ HÀNG</button>

                @*MÔ TẢ*@
                <div class="section-title">MÔ TẢ SẢN PHẨM</div>
                <p>@Model.DecriptionPro</p>

            </div>
        </div>
    </div>
}

<script>
    // chọn màu
    $(".color-box").click(function () {
        $(".color-box").css("border", "1px solid #ccc");
        $(this).css("border", "2px solid black");

        let colorName = $(this).data("color");
        $("#ColorSelected").val(colorName);
    });

    // chọn size
    $(".size-box").click(function () {
        $(".size-box").css("background", "white").css("color", "black");
        $(this).css("background", "black").css("color", "white");

        let sizeName = $(this).text();
        $("#SizeSelected").val(sizeName);
    });
</script>

