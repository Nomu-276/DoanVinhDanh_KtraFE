@model WebBanQuanAo_Main_.Models.ViewModel.CheckoutVM

@{
    ViewBag.Title = "Checkout";
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

<div class="container my-5">
    <h2 class="text-uppercase mb-4">Thanh toán đơn hàng</h2>

    @using (Html.BeginForm("Checkout", "Order", FormMethod.Post, new { @class = "row" }))
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.CustomerID)
        @Html.HiddenFor(m => m.Username)

        <div class="col-md-7">
            <div class="card p-4 mb-4">
                <h4 class="mb-3">Thông tin giao hàng</h4>

                <div class="form-group mb-3">
                    <label class="fw-bold">Địa chỉ nhận hàng (*)</label>
                    @Html.TextBoxFor(m => m.ShippingAddress, new { @class = "form-control", @placeholder = "Nhập địa chỉ nhận hàng...", @required = "required" })
                    @Html.ValidationMessageFor(m => m.ShippingAddress, "", new { @class = "text-danger" })
                </div>

                <div class="form-group mb-3">
                    <label class="fw-bold">Phương thức thanh toán</label>
                    <div class="form-check">
                        @Html.RadioButtonFor(m => m.PaymentMethod, "Tiền mặt", new { @class = "form-check-input", @id = "cod", @checked = "checked" })
                        <label class="form-check-label" for="cod">Thanh toán khi nhận hàng (COD)</label>
                    </div>
                    <div class="form-check">
                        @Html.RadioButtonFor(m => m.PaymentMethod, "Chuyển khoản", new { @class = "form-check-input", @id = "banking" })
                        <label class="form-check-label" for="banking">Chuyển khoản ngân hàng</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-5">
            <div class="card p-4 bg-light">
                <h4 class="mb-3">Đơn hàng của bạn</h4>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Sản phẩm</th>
                            <th class="text-center">SL</th>
                            <th class="text-end">Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.CartItems)
                        {
                            <tr>
                                <td>@item.namePro <br> <small class="text-muted">@item.Size / @item.Color</small></td>
                                <td class="text-center">@item.quantity</td>
                                <td class="text-end">@String.Format("{0:N0}", item.total) đ</td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr class="fw-bold fs-5">
                            <td colspan="2">TỔNG CỘNG</td>
                            <td class="text-end text-danger">@String.Format("{0:N0}", Model.TotalAmount) đ</td>
                        </tr>
                    </tfoot>
                </table>

                <button type="submit" class="btn btn-primary w-100 py-2 text-uppercase fw-bold mt-3">Xác nhận đặt hàng</button>
                <a href="@Url.Action("Index", "Cart")" class="btn btn-outline-secondary w-100 py-2 mt-2">Quay lại giỏ hàng</a>
            </div>
        </div>
    }
</div>
